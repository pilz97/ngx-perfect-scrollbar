{"version":3,"file":"perfect-scrollbar.component.js","sourceRoot":"","sources":["../../src/lib/perfect-scrollbar.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Subject, merge, fromEvent } from 'rxjs';\r\nimport { mapTo, takeUntil, distinctUntilChanged } from 'rxjs/operators';\r\n\r\nimport { PLATFORM_ID } from '@angular/core';\r\nimport { isPlatformBrowser } from '@angular/common';\r\nimport { NgZone, Inject, Component,\r\n  OnInit, OnDestroy, DoCheck, Input, Output, EventEmitter, HostBinding,\r\n  ViewChild, ViewEncapsulation, ChangeDetectorRef } from '@angular/core';\r\n\r\nimport { PerfectScrollbarDirective } from './perfect-scrollbar.directive';\r\n\r\nimport { PerfectScrollbarEvent, PerfectScrollbarEvents,\r\n  PerfectScrollbarConfigInterface } from './perfect-scrollbar.interfaces';\r\n\r\n@Component({\r\n  selector: 'perfect-scrollbar',\r\n  exportAs: 'ngxPerfectScrollbar',\r\n  templateUrl: '../../dist/lib/perfect-scrollbar.component.html',\r\n  styleUrls: [\r\n    '../../dist/lib/perfect-scrollbar.component.css',\r\n    '../../node_modules/perfect-scrollbar/css/perfect-scrollbar.css'\r\n  ],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class PerfectScrollbarComponent implements OnInit, OnDestroy, DoCheck {\r\n  public states: any = {};\r\n\r\n  public indicatorX: boolean = false;\r\n  public indicatorY: boolean = false;\r\n\r\n  public interaction: boolean = false;\r\n\r\n  private scrollPositionX: number = 0;\r\n  private scrollPositionY: number = 0;\r\n\r\n  private scrollDirectionX: number = 0;\r\n  private scrollDirectionY: number = 0;\r\n\r\n  private usePropagationX: boolean = false;\r\n  private usePropagationY: boolean = false;\r\n\r\n  private allowPropagationX: boolean = false;\r\n  private allowPropagationY: boolean = false;\r\n\r\n  private stateTimeout: number | null = null;\r\n\r\n  private readonly ngDestroy: Subject<void> = new Subject();\r\n\r\n  private readonly stateUpdate: Subject<string> = new Subject();\r\n\r\n  @Input() disabled: boolean = false;\r\n\r\n  @Input() usePSClass: boolean = true;\r\n\r\n  @HostBinding('class.ps-show-limits')\r\n  @Input() autoPropagation: boolean = false;\r\n\r\n  @HostBinding('class.ps-show-active')\r\n  @Input() scrollIndicators: boolean = false;\r\n\r\n  @Input() config?: PerfectScrollbarConfigInterface;\r\n\r\n  @Output() psScrollY: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() psScrollX: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  @Output() psScrollUp: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() psScrollDown: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() psScrollLeft: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() psScrollRight: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  @Output() psYReachEnd: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() psYReachStart: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() psXReachEnd: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() psXReachStart: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  @ViewChild(PerfectScrollbarDirective, { static: true }) directiveRef?: PerfectScrollbarDirective;\r\n\r\n  constructor(private zone: NgZone, private cdRef: ChangeDetectorRef,\r\n    @Inject(PLATFORM_ID) private platformId: Object) {}\r\n\r\n  ngOnInit(): void {\r\n    if (isPlatformBrowser(this.platformId)) {\r\n      this.stateUpdate\r\n        .pipe(\r\n          takeUntil(this.ngDestroy),\r\n          distinctUntilChanged((a, b) => (a === b && !this.stateTimeout))\r\n        )\r\n        .subscribe((state: string) => {\r\n          if (this.stateTimeout && typeof window !== 'undefined') {\r\n            window.clearTimeout(this.stateTimeout);\r\n\r\n            this.stateTimeout = null;\r\n          }\r\n\r\n          if (state === 'x' || state === 'y') {\r\n            this.interaction = false;\r\n\r\n            if (state === 'x') {\r\n              this.indicatorX = false;\r\n\r\n              this.states.left = false;\r\n              this.states.right = false;\r\n\r\n              if (this.autoPropagation && this.usePropagationX) {\r\n                this.allowPropagationX = false;\r\n              }\r\n            } else if (state === 'y') {\r\n              this.indicatorY = false;\r\n\r\n              this.states.top = false;\r\n              this.states.bottom = false;\r\n\r\n              if (this.autoPropagation && this.usePropagationY) {\r\n                this.allowPropagationY = false;\r\n              }\r\n            }\r\n          } else {\r\n            if (state === 'left' || state === 'right') {\r\n              this.states.left = false;\r\n              this.states.right = false;\r\n\r\n              this.states[state] = true;\r\n\r\n              if (this.autoPropagation && this.usePropagationX) {\r\n                this.indicatorX = true;\r\n              }\r\n            } else if (state === 'top' || state === 'bottom') {\r\n              this.states.top = false;\r\n              this.states.bottom = false;\r\n\r\n              this.states[state] = true;\r\n\r\n              if (this.autoPropagation && this.usePropagationY) {\r\n                this.indicatorY = true;\r\n              }\r\n            }\r\n\r\n            if (this.autoPropagation && typeof window !== 'undefined') {\r\n              this.stateTimeout = window.setTimeout(() => {\r\n                this.indicatorX = false;\r\n                this.indicatorY = false;\r\n\r\n                this.stateTimeout = null;\r\n\r\n                if (this.interaction && (this.states.left || this.states.right)) {\r\n                  this.allowPropagationX = true;\r\n                }\r\n\r\n                if (this.interaction && (this.states.top || this.states.bottom)) {\r\n                  this.allowPropagationY = true;\r\n                }\r\n\r\n                this.cdRef.markForCheck();\r\n              }, 500);\r\n            }\r\n          }\r\n\r\n          this.cdRef.markForCheck();\r\n          this.cdRef.detectChanges();\r\n        });\r\n\r\n      this.zone.runOutsideAngular(() => {\r\n        if (this.directiveRef) {\r\n          const element = this.directiveRef.elementRef.nativeElement;\r\n\r\n          fromEvent<WheelEvent>(element, 'wheel')\r\n            .pipe(\r\n              takeUntil(this.ngDestroy)\r\n            )\r\n            .subscribe((event: WheelEvent) => {\r\n              if (!this.disabled && this.autoPropagation) {\r\n                const scrollDeltaX = event.deltaX;\r\n                const scrollDeltaY = event.deltaY;\r\n\r\n                this.checkPropagation(event, scrollDeltaX, scrollDeltaY);\r\n              }\r\n            });\r\n\r\n          fromEvent<TouchEvent>(element, 'touchmove')\r\n            .pipe(\r\n              takeUntil(this.ngDestroy)\r\n            )\r\n            .subscribe((event: TouchEvent) => {\r\n              if (!this.disabled && this.autoPropagation) {\r\n                const scrollPositionX = event.touches[0].clientX;\r\n                const scrollPositionY = event.touches[0].clientY;\r\n\r\n                const scrollDeltaX = scrollPositionX - this.scrollPositionX;\r\n                const scrollDeltaY = scrollPositionY - this.scrollPositionY;\r\n\r\n                this.checkPropagation(event, scrollDeltaX, scrollDeltaY);\r\n\r\n                this.scrollPositionX = scrollPositionX;\r\n                this.scrollPositionY = scrollPositionY;\r\n              }\r\n            });\r\n\r\n            merge(\r\n              fromEvent(element, 'ps-scroll-x')\r\n                .pipe(mapTo('x')),\r\n              fromEvent(element, 'ps-scroll-y')\r\n                .pipe(mapTo('y')),\r\n              fromEvent(element, 'ps-x-reach-end')\r\n                .pipe(mapTo('right')),\r\n              fromEvent(element, 'ps-y-reach-end')\r\n                .pipe(mapTo('bottom')),\r\n              fromEvent(element, 'ps-x-reach-start')\r\n                .pipe(mapTo('left')),\r\n              fromEvent(element, 'ps-y-reach-start')\r\n                .pipe(mapTo('top')),\r\n            )\r\n            .pipe(\r\n              takeUntil(this.ngDestroy)\r\n            )\r\n            .subscribe((state: string) => {\r\n              if (!this.disabled && (this.autoPropagation || this.scrollIndicators)) {\r\n                this.stateUpdate.next(state);\r\n              }\r\n            });\r\n        }\r\n      });\r\n\r\n      window.setTimeout(() => {\r\n        PerfectScrollbarEvents.forEach((eventName: PerfectScrollbarEvent) => {\r\n          if (this.directiveRef) {\r\n            this.directiveRef[eventName] = this[eventName];\r\n          }\r\n        });\r\n      }, 0);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (isPlatformBrowser(this.platformId)) {\r\n      this.ngDestroy.next();\r\n      this.ngDestroy.unsubscribe();\r\n\r\n      if (this.stateTimeout && typeof window !== 'undefined') {\r\n        window.clearTimeout(this.stateTimeout);\r\n      }\r\n    }\r\n  }\r\n\r\n  ngDoCheck(): void {\r\n    if (isPlatformBrowser(this.platformId)) {\r\n      if (!this.disabled && this.autoPropagation && this.directiveRef) {\r\n        const element = this.directiveRef.elementRef.nativeElement;\r\n\r\n        this.usePropagationX = element.classList.contains('ps--active-x');\r\n\r\n        this.usePropagationY = element.classList.contains('ps--active-y');\r\n      }\r\n    }\r\n  }\r\n\r\n  private checkPropagation(event: any, deltaX: number, deltaY: number): void {\r\n    this.interaction = true;\r\n\r\n    const scrollDirectionX = (deltaX < 0) ? -1 : 1;\r\n    const scrollDirectionY = (deltaY < 0) ? -1 : 1;\r\n\r\n    if ((this.usePropagationX && this.usePropagationY) ||\r\n        (this.usePropagationX && (!this.allowPropagationX ||\r\n        (this.scrollDirectionX !== scrollDirectionX))) ||\r\n        (this.usePropagationY && (!this.allowPropagationY ||\r\n        (this.scrollDirectionY !== scrollDirectionY))))\r\n    {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n    }\r\n\r\n    if (!!deltaX) {\r\n      this.scrollDirectionX = scrollDirectionX;\r\n    }\r\n\r\n    if (!!deltaY) {\r\n      this.scrollDirectionY = scrollDirectionY;\r\n    }\r\n\r\n    this.stateUpdate.next('interaction');\r\n\r\n    this.cdRef.detectChanges();\r\n  }\r\n}\r\n"]}